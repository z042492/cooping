for(var js_url,edit_mode,ajax_php_url,wp_url,pic_sb,pic_no,pic_ys,txt1,txt2,txt3,edt1,edt2,cancel_edit,edit,num,comm_array,i=0,got=-1,len=document.getElementsByTagName("script").length;len>=i&&-1==got;)js_url=document.getElementsByTagName("script")[i].src,got=js_url.indexOf("comments-ajax.js"),i++;edit_mode="1",ajax_php_url=js_url.replace("-ajax.js","-ajax.php"),wp_url=js_url.substr(0,js_url.indexOf("wp-content")),pic_sb=wp_url+"wp-admin/images/wpspin_dark.gif",pic_no=wp_url+"wp-admin/images/no.png",pic_ys=wp_url+"wp-admin/images/yes.png",txt1='<div id="loading"> 正在提交, 请稍候...</div>',txt2='<div id="error">#</div>',txt3='"> <div id="edita">提交成功',edt1=',刷新页面之前你可以 <a rel="nofollow" class="comment-reply-link_a" href="#edit" onclick=\'return addComment.moveForm("',edt2=")'>编辑留言内容</a></div> ",cancel_edit="取消编辑",num=1,comm_array=[],comm_array.push(""),jQuery(document).ready(function(a){function b(){$new_comm.show(),$new_sucs.show(),a("textarea").each(function(){this.value=""}),edit=""}function e(){c>0?($submit.val(c),c--,setTimeout(e,1e3)):($submit.val(d).attr("disabled",!1).fadeTo("slow",1),c=10)}$comments=a("#comments-title"),$cancel=a("#cancel-comment-reply-link"),cancel_text=$cancel.text(),$submit=a("#commentform #submit"),$submit.attr("disabled",!1),a("#comment").after(txt1+txt2),a("#loading").hide(),a("#error").hide(),$body=window.opera?"CSS1Compat"==document.compatMode?a("html"):a("body"):a("html,body"),a("#commentform").submit(function(){return a("#loading").slideDown(),$submit.attr("disabled",!0).fadeTo("slow",.5),edit&&a("#comment").after('<input type="text" name="edit_id" id="edit_id" value="'+edit+'" style="display:none;" />'),a.ajax({url:ajax_php_url,data:a(this).serialize(),type:a(this).attr("method"),error:function(b){a("#loading").slideUp(),a("#error").slideDown().html(b.responseText),setTimeout(function(){$submit.attr("disabled",!1).fadeTo("slow",1),a("#error").slideUp()},3e3)},success:function(b){a("#loading").hide(),comm_array.push(a("#comment").val()),a("textarea").each(function(){this.value=""});var c=addComment,d=c.I("cancel-comment-reply-link"),f=c.I("wp-temp-form-div"),g=c.I(c.respondId),h=c.I("comment_post_ID").value,i=c.I("comment_parent").value;!edit&&$comments.length&&(n=parseInt($comments.text().match(/\d+/)),$comments.text($comments.text().replace(n,n+1))),new_htm='" id="new_comm_'+num+'"></',new_htm="0"==i?'\n<ol style="clear:both;" class="commentlist'+new_htm+"ol>":'\n<ul class="children'+new_htm+"ul>",ok_htm='\n<span id="success_'+num+txt3,"1"==edit_mode&&(div_=-1==document.body.innerHTML.indexOf("div-comment-")?"":-1==document.body.innerHTML.indexOf("li-comment-")?"div-":"",ok_htm=ok_htm.concat(edt1,div_,"comment-",i,'", "',i,'", "respond", "',h,'", ',num,edt2)),ok_htm+="</span><span></span>\n",a("#respond").before(new_htm),a("#new_comm_"+num).hide().append(b),a("#new_comm_"+num+" li").append(ok_htm),a("#new_comm_"+num).fadeIn(4e3),$body.animate({scrollTop:a("#new_comm_"+num).offset().top-200},900),e(),num++,edit="",a("*").remove("#edit_id"),d.style.display="none",d.onclick=null,c.I("comment_parent").value="0",f&&g&&(f.parentNode.insertBefore(g,f),f.parentNode.removeChild(f))}}),!1}),addComment={moveForm:function(c,d,e,f,g){var i,h=this,j=h.I(c),k=h.I(e),l=h.I("cancel-comment-reply-link"),m=h.I("comment_parent"),n=h.I("comment_post_ID");edit&&b(),g?(h.I("comment").value=comm_array[g],edit=h.I("new_comm_"+g).innerHTML.match(/(comment-)(\d+)/)[2],$new_sucs=a("#success_"+g),$new_sucs.hide(),$new_comm=a("#new_comm_"+g),$new_comm.hide(),$cancel.text(cancel_edit)):$cancel.text(cancel_text),h.respondId=e,f=f||!1,h.I("wp-temp-form-div")||(i=document.createElement("div"),i.id="wp-temp-form-div",i.style.display="none",k.parentNode.insertBefore(i,k)),j?j.parentNode.insertBefore(k,j.nextSibling):(temp=h.I("wp-temp-form-div"),h.I("comment_parent").value="0",temp.parentNode.insertBefore(k,temp),temp.parentNode.removeChild(temp)),$body.animate({scrollTop:a("#respond").offset().top-180},400),n&&f&&(n.value=f),m.value=d,l.style.display="",l.onclick=function(){edit&&b();var a=addComment,c=a.I("wp-temp-form-div"),d=a.I(a.respondId);return a.I("comment_parent").value="0",c&&d&&(c.parentNode.insertBefore(d,c),c.parentNode.removeChild(c)),this.style.display="none",this.onclick=null,!1};try{h.I("comment").focus()}catch(o){}return!1},I:function(a){return document.getElementById(a)}};var c=10,d=$submit.val()});